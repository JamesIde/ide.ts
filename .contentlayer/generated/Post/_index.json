[
  {
    "title": "Terratrack",
    "date": "26th June 2023",
    "body": {
      "raw": "\r\n<BannerImage\r\n  alt=\"banner\"\r\n  caption=\"Terratrack\"\r\n  src={\"/assets/terratrack/banner.png\"}\r\n  width={1200}\r\n  height={500}\r\n/>\r\n<br/>\r\nYou can view the full code <a href=\"https://github.com/JamesIde/terratrack-app\" target=\"_#\" className = \"text-blue-500 hover:text-blue-900 duration-500\">here</a> and check out the app on the <a href=\"https://play.google.com/store/apps/details?id=com.tudor14abw.terratrack\" target=\"_#\" className = \"text-blue-500 hover:text-blue-900 duration-500\">Android Play Store</a>.\r\n\r\n<br />\r\n\r\nFor a long time I've wanted to build something that allows me to track my outdoor\r\nactivities - specifically my longer rucks in preparation for trips later this year.\r\n\r\n<br />\r\n\r\nI'd never worked with Mapbox, (specifically <a href = \"https://github.com/rnmapbox/maps\" target = \"_#\" className = \"text-blue-500 hover:text-blue-900 duration-500\">@rnmapbox/maps</a>) or even React Native at this point. I'd never used Expo and I didn't know what EAS and didn't know how mobile apps really worked. So it was a good opportunity to learn something new.. and man, there was a lot to learn...\r\n\r\n<br />\r\nTerratrack is very minimal. You select your activity type, record your activity and\r\nsave it to your device. There's an elevation chart for good measure. You can skribble\r\nalong the chart and see your marker on the selected activity, which I think is pretty\r\ncool and useful feature.\r\n\r\n<br />\r\n<div className=\"grid grid-cols-2 gap-3 justify-center\">\r\n    <div className=\"flex flex-col md:flex-row gap-2\">\r\n    <Image\r\n      alt=\"1\"\r\n      caption=\"Tracking your location\"\r\n      src={\"/assets/terratrack/in-action.jpg\"}\r\n      width={1000}\r\n      height={1000}\r\n    />\r\n    <Image\r\n      alt=\"2\"\r\n      caption=\"Tracking your location\"\r\n      src={\"/assets/terratrack/mt-george.jpg\"}\r\n      width={1000}\r\n      height={1000}\r\n    />\r\n\r\n  </div>\r\n  <div className=\"flex flex-col md:flex-row gap-2\">\r\n    <Image\r\n      alt=\"3\"\r\n      caption=\"Tracking your location\"\r\n      src={\"/assets/terratrack/finished-track.jpg\"}\r\n      width={1000}\r\n      height={1000}\r\n    />\r\n    <Image\r\n      alt=\"4\"\r\n      caption=\"Profile\"\r\n      src={\"/assets/terratrack/profile.jpg\"}\r\n      width={1000}\r\n      height={1000}\r\n    />\r\n  </div>\r\n</div>\r\n\r\n<br />\r\n\r\nYou can also create an account (secured by <a href=\"https://clerk.com/\" target=\"_#\" className = \"text-blue-500 hover:text-blue-900 duration-500\">Clerk</a>) and upload your activites to the cloud.\r\nThese are stored on <a href = \"https://supabase.com/docs\" target =\"_#\" className = \"text-blue-500 hover:text-blue-900 duration-500\">Supabase</a> and secured with Supabase Auth too. Thats because theres a \r\n<a href = \"https://terratrack-web.vercel.app/\" target=\"_#\" className = \"text-blue-500 hover:text-blue-900 duration-500\"> website </a> that allows you to login, and view your uploaded activities. It's a lot easier and more pleasing to view your gps tracks on a bigger screen.\r\n<br />\r\n\r\nOne of the bigger problems I had was arround consistent location updates. Given this is a GPS tracking app, you HAVE to have the most accurate information possible, otherwise whats the point of the whole thing? This took many attempts to get right.\r\nYou can use the UserLocation Component that comes with RNMapbox and this works well on iOS devices, but on Android its a different story. Here's how I originally set it up:\r\n\r\n<br />\r\n```tsx\r\n<Mapbox.MapView>\r\n  <Camera followUserLocation={followUser} ref={cameraRef} />\r\n  <UserLocation\r\n    // other props\r\n    onUpdate={(location) => {\r\n      // update any global state, fire an api call.. anything\r\n    }}\r\n  />\r\n</Mapbox.MapView>\r\n```\r\n\r\n<br />\r\nThis was still causing me problems. My Android would stop sending location updates\r\nafter 10-15 minutes, then receive them all in one big batch. Which wasn't helpful!\r\nDesperate to find a solution, I spent hours testing, researching and debugging. Eventually,\r\nI stumbled across a potential solution - battery optimization, background and expo-location.\r\n<br />\r\nThe first one is to install expo-task-manager. This allows us to establish long running\r\ntasks that the app must perform, even in the background. This can get quite heavy\r\ninterleaving it with the second package needed - expo-location (there is a lot of\r\ncode omitted for brevity BTW). My understanding is this... you establish a task constant\r\noutside of your component:\r\n<br />\r\n\r\n```ts\r\n// Mapbox.tsx\r\nconst TASK_FETCH_LOCATION = \"TASK_FETCH_LOCATION\";\r\n// Above your component\r\n\r\nexport default function Mapbox() {\r\n  return (\r\n    // Your jsx\r\n  )\r\n}\r\n```\r\n\r\n<br />\r\n\r\nOnce you've done this, you need to define the task using Task Manager:\r\n\r\n<br />\r\n\r\n```ts\r\nTaskManager.defineTask(TASK_FETCH_LOCATION, ({ data, error }) => {\r\n  if (error) {\r\n    // check `error.message` for more details.\r\n    return;\r\n  }\r\n\r\n  if (recordingState.isRecording) {\r\n    // user has clicked 'start'\r\n    // update location, distance, elevation and so on\r\n  }\r\n});\r\n```\r\n\r\n<br />\r\n\r\nThis then runs inside of a useEffect hook:\r\n\r\n<br />\r\n\r\n```ts\r\nuseEffect(() => {\r\n  if (recordingState.isRecording) {\r\n    // Comes from expo-location\r\n    Location.startLocationUpdatesAsync(TASK_FETCH_LOCATION, {\r\n      accuracy: Location.Accuracy.Balanced,\r\n      distanceInterval: 0,\r\n      showsBackgroundLocationIndicator: true,\r\n      timeInterval: 1000,\r\n    });\r\n  }\r\n\r\n  // Cleanup the interval when the component unmounts\r\n  return () => {\r\n    Location.stopLocationUpdatesAsync(TASK_FETCH_LOCATION).catch(() => {});\r\n  };\r\n}, [recordingState]);\r\n```\r\n<br/>\r\nYou see above? There's no code thats actually updating state or making an API call with the location updates. But! We're starting a continous stream of location updates by passing in our ```TASK_FETCH_LOCATION```. This will run the task (see code snippet 2) which will handle the updating of the location object.\r\n\r\n<br />\r\nThe catch here is the following: your Location object registers to receive the location\r\nupdates provided by the task manager - even in the background. Basically... I get\r\nbackground location updates despite only having foreground permissions available.\r\nThis is a great thing for GPS tracking, but from a conceptual/technical understanding,\r\nits a bit confusing.\r\n\r\n\r\n<br />\r\nThats all to it really. A pretty minimal GPS tracker with some interesting problems\r\nto solve and new technology to try. You can view the full code <a href=\"https://github.com/JamesIde/terratrack-app\" target=\"_#\" className = \"text-blue-500 hover:text-blue-900 duration-500\">here</a> and check out the app on the <a href=\"https://play.google.com/store/apps/details?id=com.tudor14abw.terratrack\" target=\"_#\" className = \"text-blue-500 hover:text-blue-900 duration-500\">Android Play Store</a>.\r\n<br/>",
      "code": "var Component=(()=>{var p=Object.create;var o=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var A=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),F=(l,n)=>{for(var t in n)o(l,t,{get:n[t],enumerable:!0})},s=(l,n,t,a)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of y(n))!g.call(l,r)&&r!==t&&o(l,r,{get:()=>n[r],enumerable:!(a=B(n,r))||a.enumerable});return l};var m=(l,n,t)=>(t=l!=null?p(u(l)):{},s(n||!l||!l.__esModule?o(t,\"default\",{value:l,enumerable:!0}):t,l)),f=l=>s(o({},\"__esModule\",{value:!0}),l);var i=A((E,c)=>{c.exports=_jsx_runtime});var v={};F(v,{default:()=>k,frontmatter:()=>b});var e=m(i()),b={title:\"Terratrack\",date:\"26th June 2023\"};function d(l){let n=Object.assign({p:\"p\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\"},l.components),{BannerImage:t,Image:a}=n;return t||h(\"BannerImage\",!0),a||h(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t,{alt:\"banner\",caption:\"Terratrack\",src:\"/assets/terratrack/banner.png\",width:1200,height:500}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can view the full code \",(0,e.jsx)(\"a\",{href:\"https://github.com/JamesIde/terratrack-app\",target:\"_#\",className:\"text-blue-500 hover:text-blue-900 duration-500\",children:\"here\"}),\" and check out the app on the \",(0,e.jsx)(\"a\",{href:\"https://play.google.com/store/apps/details?id=com.tudor14abw.terratrack\",target:\"_#\",className:\"text-blue-500 hover:text-blue-900 duration-500\",children:\"Android Play Store\"}),\".\"]}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:`For a long time I've wanted to build something that allows me to track my outdoor\\r\nactivities - specifically my longer rucks in preparation for trips later this year.`}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsxs)(n.p,{children:[\"I'd never worked with Mapbox, (specifically \",(0,e.jsx)(\"a\",{href:\"https://github.com/rnmapbox/maps\",target:\"_#\",className:\"text-blue-500 hover:text-blue-900 duration-500\",children:\"@rnmapbox/maps\"}),\") or even React Native at this point. I'd never used Expo and I didn't know what EAS and didn't know how mobile apps really worked. So it was a good opportunity to learn something new.. and man, there was a lot to learn...\"]}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:`Terratrack is very minimal. You select your activity type, record your activity and\\r\nsave it to your device. There's an elevation chart for good measure. You can skribble\\r\nalong the chart and see your marker on the selected activity, which I think is pretty\\r\ncool and useful feature.`}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsxs)(\"div\",{className:\"grid grid-cols-2 gap-3 justify-center\",children:[(0,e.jsxs)(\"div\",{className:\"flex flex-col md:flex-row gap-2\",children:[(0,e.jsx)(a,{alt:\"1\",caption:\"Tracking your location\",src:\"/assets/terratrack/in-action.jpg\",width:1e3,height:1e3}),(0,e.jsx)(a,{alt:\"2\",caption:\"Tracking your location\",src:\"/assets/terratrack/mt-george.jpg\",width:1e3,height:1e3})]}),(0,e.jsxs)(\"div\",{className:\"flex flex-col md:flex-row gap-2\",children:[(0,e.jsx)(a,{alt:\"3\",caption:\"Tracking your location\",src:\"/assets/terratrack/finished-track.jpg\",width:1e3,height:1e3}),(0,e.jsx)(a,{alt:\"4\",caption:\"Profile\",src:\"/assets/terratrack/profile.jpg\",width:1e3,height:1e3})]})]}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can also create an account (secured by \",(0,e.jsx)(\"a\",{href:\"https://clerk.com/\",target:\"_#\",className:\"text-blue-500 hover:text-blue-900 duration-500\",children:\"Clerk\"}),`) and upload your activites to the cloud.\\r\nThese are stored on `,(0,e.jsx)(\"a\",{href:\"https://supabase.com/docs\",target:\"_#\",className:\"text-blue-500 hover:text-blue-900 duration-500\",children:\"Supabase\"}),` and secured with Supabase Auth too. Thats because theres a\\r\n`,(0,e.jsx)(\"a\",{href:\"https://terratrack-web.vercel.app/\",target:\"_#\",className:\"text-blue-500 hover:text-blue-900 duration-500\",children:\" website \"}),\" that allows you to login, and view your uploaded activities. It's a lot easier and more pleasing to view your gps tracks on a bigger screen.\"]}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:`One of the bigger problems I had was arround consistent location updates. Given this is a GPS tracking app, you HAVE to have the most accurate information possible, otherwise whats the point of the whole thing? This took many attempts to get right.\\r\nYou can use the UserLocation Component that comes with RNMapbox and this works well on iOS devices, but on Android its a different story. Here's how I originally set it up:`}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"tsx\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"tsx\",\"data-theme\":\"default\",children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"<\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"Mapbox.MapView\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  <\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"Camera\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,e.jsx)(n.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"followUserLocation\"}),(0,e.jsx)(n.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"{\"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"followUser\"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"}\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,e.jsx)(n.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"ref\"}),(0,e.jsx)(n.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"{\"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"cameraRef\"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"}\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" />\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  <\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"UserLocation\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// other props\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"onUpdate\"}),(0,e.jsx)(n.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"{\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"location\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// update any global state, fire an api call.. anything\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    }\"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"}\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  />\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"</\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"Mapbox.MapView\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\">\"})]})]})})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:`This was still causing me problems. My Android would stop sending location updates\\r\nafter 10-15 minutes, then receive them all in one big batch. Which wasn't helpful!\\r\nDesperate to find a solution, I spent hours testing, researching and debugging. Eventually,\\r\nI stumbled across a potential solution - battery optimization, background and expo-location.`}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:`The first one is to install expo-task-manager. This allows us to establish long running\\r\ntasks that the app must perform, even in the background. This can get quite heavy\\r\ninterleaving it with the second package needed - expo-location (there is a lot of\\r\ncode omitted for brevity BTW). My understanding is this... you establish a task constant\\r\noutside of your component:`}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Mapbox.tsx\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"TASK_FETCH_LOCATION\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,e.jsx)(n.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,e.jsx)(n.span,{style:{color:\"#98C379\"},children:'\"TASK_FETCH_LOCATION\"'}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Above your component\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"export\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"default\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,e.jsx)(n.span,{style:{color:\"#61AFEF\"},children:\"Mapbox\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Your jsx\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  )\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:\"Once you've done this, you need to define the task using Task Manager:\"}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"TaskManager\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#61AFEF\"},children:\"defineTask\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"TASK_FETCH_LOCATION\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\", ({ \"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"data\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"error\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" }) \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"if\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"error\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// check `error.message` for more details.\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"if\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"recordingState\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"isRecording\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// user has clicked 'start'\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// update location, distance, elevation and so on\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:\"This then runs inside of a useEffect hook:\"}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#61AFEF\"},children:\"useEffect\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"(() \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"if\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"recordingState\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"isRecording\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Comes from expo-location\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"Location\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#61AFEF\"},children:\"startLocationUpdatesAsync\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"TASK_FETCH_LOCATION\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"accuracy\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"Location\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"Accuracy\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"Balanced\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"distanceInterval\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"showsBackgroundLocationIndicator\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#D19A66\"},children:\"true\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"timeInterval\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(n.span,{style:{color:\"#D19A66\"},children:\"1000\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,e.jsx)(n.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Cleanup the interval when the component unmounts\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" () \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"Location\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(n.span,{style:{color:\"#61AFEF\"},children:\"stopLocationUpdatesAsync\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(n.span,{style:{color:\"#E5C07B\"},children:\"TASK_FETCH_LOCATION\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\").\"}),(0,e.jsx)(n.span,{style:{color:\"#61AFEF\"},children:\"catch\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"(() \"}),(0,e.jsx)(n.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\" {});\"})]}),`\n`,(0,e.jsx)(n.span,{\"data-line\":\"\",children:(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"  };\"})}),`\n`,(0,e.jsxs)(n.span,{\"data-line\":\"\",children:[(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"}, [\"}),(0,e.jsx)(n.span,{style:{color:\"#E06C75\"},children:\"recordingState\"}),(0,e.jsx)(n.span,{style:{color:\"#ABB2BF\"},children:\"]);\"})]})]})})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsxs)(n.p,{children:[\"You see above? There's no code thats actually updating state or making an API call with the location updates. But! We're starting a continous stream of location updates by passing in our \",(0,e.jsx)(n.code,{children:\"TASK_FETCH_LOCATION\"}),\". This will run the task (see code snippet 2) which will handle the updating of the location object.\"]}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:`The catch here is the following: your Location object registers to receive the location\\r\nupdates provided by the task manager - even in the background. Basically... I get\\r\nbackground location updates despite only having foreground permissions available.\\r\nThis is a great thing for GPS tracking, but from a conceptual/technical understanding,\\r\nits a bit confusing.`}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsxs)(n.p,{children:[`Thats all to it really. A pretty minimal GPS tracker with some interesting problems\\r\nto solve and new technology to try. You can view the full code `,(0,e.jsx)(\"a\",{href:\"https://github.com/JamesIde/terratrack-app\",target:\"_#\",className:\"text-blue-500 hover:text-blue-900 duration-500\",children:\"here\"}),\" and check out the app on the \",(0,e.jsx)(\"a\",{href:\"https://play.google.com/store/apps/details?id=com.tudor14abw.terratrack\",target:\"_#\",className:\"text-blue-500 hover:text-blue-900 duration-500\",children:\"Android Play Store\"}),\".\"]}),`\n`,(0,e.jsx)(\"br\",{})]})}function C(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(d,l)})):d(l)}var k=C;function h(l,n){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+l+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return f(v);})();\n;return Component;"
    },
    "_id": "projects/terratrack.mdx",
    "_raw": {
      "sourceFilePath": "projects/terratrack.mdx",
      "sourceFileName": "terratrack.mdx",
      "sourceFileDir": "projects",
      "contentType": "mdx",
      "flattenedPath": "projects/terratrack"
    },
    "type": "Post",
    "slug": "terratrack"
  },
  {
    "title": "The Western Arthurs Walking App",
    "date": "29th June 2023",
    "body": {
      "raw": "\r\n<div className = \"mx-auto flex justify-center\">\r\n<Image\r\n      alt=\"1\"\r\n      caption=\"The Western Arthurs Walking App\"\r\n      src={\"/assets/wawa/icon.png\"}\r\n      width={1000}\r\n      height={1000}\r\n    />\r\n</div>\r\n<br/>\r\n<p className = \"font-bold font-nova text-center\">\r\nComing 1st February 2024\r\n</p>\r\n\r\n",
      "code": "var Component=(()=>{var d=Object.create;var s=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),g=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})},i=(e,t,r,a)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let o of u(t))!h.call(e,o)&&o!==r&&s(e,o,{get:()=>t[o],enumerable:!(a=l(t,o))||a.enumerable});return e};var j=(e,t,r)=>(r=e!=null?d(f(e)):{},i(t||!e||!e.__esModule?s(r,\"default\",{value:e,enumerable:!0}):r,e)),_=e=>i(s({},\"__esModule\",{value:!0}),e);var m=x((k,c)=>{c.exports=_jsx_runtime});var M={};g(M,{default:()=>y,frontmatter:()=>b});var n=j(m()),b={title:\"The Western Arthurs Walking App\",date:\"29th June 2023\"};function p(e){let t=Object.assign({p:\"p\"},e.components),{Image:r}=t;return r||A(\"Image\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(\"div\",{className:\"mx-auto flex justify-center\",children:(0,n.jsx)(r,{alt:\"1\",caption:\"The Western Arthurs Walking App\",src:\"/assets/wawa/icon.png\",width:1e3,height:1e3})}),`\n`,(0,n.jsx)(\"br\",{}),`\n`,(0,n.jsx)(\"p\",{className:\"font-bold font-nova text-center\",children:(0,n.jsx)(t.p,{children:\"Coming 1st February 2024\"})})]})}function w(e={}){let{wrapper:t}=e.components||{};return t?(0,n.jsx)(t,Object.assign({},e,{children:(0,n.jsx)(p,e)})):p(e)}var y=w;function A(e,t){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return _(M);})();\n;return Component;"
    },
    "_id": "projects/the-western-arthurs-walking-app.mdx",
    "_raw": {
      "sourceFilePath": "projects/the-western-arthurs-walking-app.mdx",
      "sourceFileName": "the-western-arthurs-walking-app.mdx",
      "sourceFileDir": "projects",
      "contentType": "mdx",
      "flattenedPath": "projects/the-western-arthurs-walking-app"
    },
    "type": "Post",
    "slug": "the-western-arthurs-walking-app"
  }
]